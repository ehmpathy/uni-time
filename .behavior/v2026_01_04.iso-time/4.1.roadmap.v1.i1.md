# roadmap: iso-time implementation

execution checklist with ordered dependencies and behavioral verification.

---

## legend

- `[ ]` = pending
- `[~]` = in progress
- `[x]` = complete
- `[!]` = blocked
- `depends:` = must complete before this step
- `verify:` = command to verify acceptance
- `accepts:` = behavioral acceptance criteria

---

## milestone 1: domain objects

### 1.1 stamp types

- [ ] **create `src/domain.objects/IsoTimeStamp.ts`**
  - depends: none
  - accepts:
    - IsoTimeStamp type defined with format `yyyy-MM-ddTHH:mm:ssZ`
    - IsoDateStamp type defined with format `yyyy-MM-dd`
    - IsoMonthStamp type defined with format `yyyy-MM`
    - IsoYearStamp type defined with format `yyyy`
    - IsoTimeStamp assignable to IsoDateStamp (more precise → less precise)
  - verify: `npm run test:types`

- [ ] **create `src/domain.objects/IsoTimeStamp.test.ts`**
  - depends: 1.1.create IsoTimeStamp.ts
  - accepts:
    - test confirms IsoTimeStamp assignable to IsoDateStamp
    - test confirms IsoDateStamp NOT assignable to IsoTimeStamp (via @ts-expect-error)
    - all type composition assertions pass
  - verify: `npm run test:unit -- IsoTimeStamp.test.ts`

### 1.2 float types

- [ ] **create `src/domain.objects/IsoTimeFloat.ts`**
  - depends: none
  - accepts:
    - IsoTimeFloat type defined with format `HH:mm:ss`
    - IsoHourFloat type defined with format `HH` (00-23)
    - IsoMinuteFloat type defined with format `mm` (00-59)
    - IsoMonthFloat type defined with format `MM` (01-12)
    - IsoDayFloat type defined with format `dd` (01-31)
    - IsoWeekdayFloat type defined with format `d` (1-7)
  - verify: `npm run test:types`

- [ ] **create `src/domain.objects/IsoTimeFloat.test.ts`**
  - depends: 1.2.create IsoTimeFloat.ts
  - accepts:
    - all float types have correct branded string structure
    - type definitions compile without errors
  - verify: `npm run test:unit -- IsoTimeFloat.test.ts`

### 1.3 range types

- [ ] **create `src/domain.objects/IsoTimeStampRange.ts`**
  - depends: 1.1.create IsoTimeStamp.ts
  - accepts:
    - IsoTimeStampRange shape: `{ since: IsoTimeStamp; until: IsoTimeStamp }`
    - IsoDateStampRange shape: `{ since: IsoDateStamp; until: IsoDateStamp }`
    - IsoTimeStampRange assignable to IsoDateStampRange
  - verify: `npm run test:types`

- [ ] **create `src/domain.objects/IsoTimeStampRange.test.ts`**
  - depends: 1.3.create IsoTimeStampRange.ts
  - accepts:
    - test confirms IsoTimeStampRange assignable to IsoDateStampRange
    - test confirms IsoDateStampRange NOT assignable to IsoTimeStampRange
  - verify: `npm run test:unit -- IsoTimeStampRange.test.ts`

### 1.4 duration type

- [ ] **update `src/domain.objects/IsoDuration.ts`**
  - depends: none
  - accepts:
    - IsoDuration includes `years` and `months` fields
    - all existing fields preserved (weeks, days, hours, minutes, seconds, milliseconds)
    - PickAny allows any combination of fields
  - verify: `npm run test:types`

- [ ] **create `src/domain.objects/IsoDuration.test.ts`**
  - depends: 1.4.update IsoDuration.ts
  - accepts:
    - test confirms all field combinations valid
    - test confirms empty object `{}` valid (zero duration)
  - verify: `npm run test:unit -- IsoDuration.test.ts`

### 1.5 milestone verification

- [ ] **verify milestone 1 complete**
  - depends: all 1.x tasks
  - accepts:
    - all domain object types compile
    - all domain object tests pass
    - 4 type files created (IsoTimeStamp, IsoTimeFloat, IsoTimeStampRange, IsoDuration)
    - 4 test files created
  - verify: `npm run test:types && npm run test:unit -- domain.objects`

---

## milestone 2: checks — stamp validators

### 2.1 IsoTimeStamp validator

- [ ] **create `src/domain.operations/checks/isIsoTimeStamp.ts`**
  - depends: 1.1.create IsoTimeStamp.ts
  - accepts:
    - `asIsoTimeStamp(input)` casts to strict `yyyy-MM-ddTHH:mm:ssZ` format
    - `isIsoTimeStamp(input)` returns true only for exact format match
    - uses `withAssure` for type narrowing
  - verify: `npm run test:types`

- [ ] **create `src/domain.operations/checks/isIsoTimeStamp.test.ts`**
  - depends: 2.1.create isIsoTimeStamp.ts
  - accepts:
    - `'2024-01-15T14:30:00Z'` → true
    - `'2024-01-15T14:30:00'` → false (no Z)
    - `'2024-01-15T14:30Z'` → false (no seconds)
    - `'2024-01-15 14:30:00Z'` → false (space not T)
    - `'2024-01-15'` → false (date only)
    - `'invalid'` → false
  - verify: `npm run test:unit -- isIsoTimeStamp.test.ts`

### 2.2 IsoDateStamp validator

- [ ] **create `src/domain.operations/checks/isIsoDateStamp.ts`**
  - depends: 1.1.create IsoTimeStamp.ts
  - accepts:
    - `asIsoDateStamp(input)` casts to strict `yyyy-MM-dd` format
    - `isIsoDateStamp(input)` returns true only for exact format match
  - verify: `npm run test:types`

- [ ] **create `src/domain.operations/checks/isIsoDateStamp.test.ts`**
  - depends: 2.2.create isIsoDateStamp.ts
  - accepts:
    - `'2024-01-15'` → true
    - `'2024-01-15T14:30:00Z'` → false (timestamp, not date)
    - `'May 15, 2024'` → false
    - `'01-15-2024'` → false
  - verify: `npm run test:unit -- isIsoDateStamp.test.ts`

### 2.3 IsoMonthStamp validator

- [ ] **create `src/domain.operations/checks/isIsoMonthStamp.ts`**
  - depends: 1.1.create IsoTimeStamp.ts
  - accepts:
    - `asIsoMonthStamp(input)` casts to strict `yyyy-MM` format
    - `isIsoMonthStamp(input)` returns true only for exact format match
  - verify: `npm run test:types`

- [ ] **create `src/domain.operations/checks/isIsoMonthStamp.test.ts`**
  - depends: 2.3.create isIsoMonthStamp.ts
  - accepts:
    - `'2024-01'` → true
    - `'2024-1'` → false (single digit month)
    - `'2024-13'` → false (invalid month)
    - `'2024-01-15'` → false (date, not month)
  - verify: `npm run test:unit -- isIsoMonthStamp.test.ts`

### 2.4 IsoYearStamp validator

- [ ] **create `src/domain.operations/checks/isIsoYearStamp.ts`**
  - depends: 1.1.create IsoTimeStamp.ts
  - accepts:
    - `asIsoYearStamp(input)` casts to strict `yyyy` format
    - `isIsoYearStamp(input)` returns true only for exact format match
  - verify: `npm run test:types`

- [ ] **create `src/domain.operations/checks/isIsoYearStamp.test.ts`**
  - depends: 2.4.create isIsoYearStamp.ts
  - accepts:
    - `'2024'` → true
    - `'24'` → false (two digit year)
    - `'2024-01'` → false (month, not year)
  - verify: `npm run test:unit -- isIsoYearStamp.test.ts`

### 2.5 milestone verification

- [ ] **verify milestone 2 complete**
  - depends: all 2.x tasks
  - accepts:
    - all stamp validators compile
    - all stamp validator tests pass
    - 4 validator files created
    - 4 test files created
  - verify: `npm run test:unit -- isIsoTimeStamp && npm run test:unit -- isIsoDateStamp && npm run test:unit -- isIsoMonthStamp && npm run test:unit -- isIsoYearStamp`

---

## milestone 3: checks — float validators

### 3.1 IsoTimeFloat validator

- [ ] **create `src/domain.operations/checks/isIsoTimeFloat.ts`**
  - depends: 1.2.create IsoTimeFloat.ts
  - accepts:
    - validates format `HH:mm:ss` via regex
    - validates semantic ranges (hours 00-23, minutes 00-59, seconds 00-59)
  - verify: `npm run test:types`

- [ ] **create `src/domain.operations/checks/isIsoTimeFloat.test.ts`**
  - depends: 3.1.create isIsoTimeFloat.ts
  - accepts:
    - `'14:30:00'` → true
    - `'00:00:00'` → true
    - `'23:59:59'` → true
    - `'14:30'` → false (no seconds)
    - `'9:30:00'` → false (single digit hour)
    - `'24:00:00'` → false (invalid hour)
    - `'14:60:00'` → false (invalid minute)
  - verify: `npm run test:unit -- isIsoTimeFloat.test.ts`

### 3.2 IsoHourFloat validator

- [ ] **create `src/domain.operations/checks/isIsoHourFloat.ts`**
  - depends: 1.2.create IsoTimeFloat.ts
  - accepts:
    - validates format `HH` via regex
    - validates range 00-23
  - verify: `npm run test:types`

- [ ] **create `src/domain.operations/checks/isIsoHourFloat.test.ts`**
  - depends: 3.2.create isIsoHourFloat.ts
  - accepts:
    - `'00'` → true
    - `'14'` → true
    - `'23'` → true
    - `'24'` → false (out of range)
    - `'9'` → false (single digit)
  - verify: `npm run test:unit -- isIsoHourFloat.test.ts`

### 3.3 IsoMinuteFloat validator

- [ ] **create `src/domain.operations/checks/isIsoMinuteFloat.ts`**
  - depends: 1.2.create IsoTimeFloat.ts
  - accepts:
    - validates format `mm` via regex
    - validates range 00-59
  - verify: `npm run test:types`

- [ ] **create `src/domain.operations/checks/isIsoMinuteFloat.test.ts`**
  - depends: 3.3.create isIsoMinuteFloat.ts
  - accepts:
    - `'00'` → true
    - `'30'` → true
    - `'59'` → true
    - `'60'` → false (out of range)
    - `'5'` → false (single digit)
  - verify: `npm run test:unit -- isIsoMinuteFloat.test.ts`

### 3.4 IsoMonthFloat validator

- [ ] **create `src/domain.operations/checks/isIsoMonthFloat.ts`**
  - depends: 1.2.create IsoTimeFloat.ts
  - accepts:
    - validates format `MM` via regex
    - validates range 01-12
  - verify: `npm run test:types`

- [ ] **create `src/domain.operations/checks/isIsoMonthFloat.test.ts`**
  - depends: 3.4.create isIsoMonthFloat.ts
  - accepts:
    - `'01'` → true
    - `'06'` → true
    - `'12'` → true
    - `'00'` → false (out of range)
    - `'13'` → false (out of range)
    - `'1'` → false (single digit)
  - verify: `npm run test:unit -- isIsoMonthFloat.test.ts`

### 3.5 IsoDayFloat validator

- [ ] **create `src/domain.operations/checks/isIsoDayFloat.ts`**
  - depends: 1.2.create IsoTimeFloat.ts
  - accepts:
    - validates format `dd` via regex
    - validates range 01-31
  - verify: `npm run test:types`

- [ ] **create `src/domain.operations/checks/isIsoDayFloat.test.ts`**
  - depends: 3.5.create isIsoDayFloat.ts
  - accepts:
    - `'01'` → true
    - `'15'` → true
    - `'31'` → true
    - `'00'` → false (out of range)
    - `'32'` → false (out of range)
    - `'1'` → false (single digit)
  - verify: `npm run test:unit -- isIsoDayFloat.test.ts`

### 3.6 IsoWeekdayFloat validator

- [ ] **create `src/domain.operations/checks/isIsoWeekdayFloat.ts`**
  - depends: 1.2.create IsoTimeFloat.ts
  - accepts:
    - validates format `d` via regex
    - validates range 1-7 (monday=1, sunday=7)
  - verify: `npm run test:types`

- [ ] **create `src/domain.operations/checks/isIsoWeekdayFloat.test.ts`**
  - depends: 3.6.create isIsoWeekdayFloat.ts
  - accepts:
    - `'1'` → true (monday)
    - `'7'` → true (sunday)
    - `'0'` → false (out of range)
    - `'8'` → false (out of range)
    - `'01'` → false (two digits)
  - verify: `npm run test:unit -- isIsoWeekdayFloat.test.ts`

### 3.7 milestone verification

- [ ] **verify milestone 3 complete**
  - depends: all 3.x tasks
  - accepts:
    - all float validators compile
    - all float validator tests pass
    - 6 validator files created
    - 6 test files created
  - verify: `npm run test:unit -- isIsoTimeFloat && npm run test:unit -- isIsoHourFloat && npm run test:unit -- isIsoMinuteFloat && npm run test:unit -- isIsoMonthFloat && npm run test:unit -- isIsoDayFloat && npm run test:unit -- isIsoWeekdayFloat`

---

## milestone 4: checks — range validators

### 4.1 IsoTimeStampRange validator

- [ ] **create `src/domain.operations/checks/isIsoTimeStampRange.ts`**
  - depends: 2.1.create isIsoTimeStamp.ts, 1.3.create IsoTimeStampRange.ts
  - accepts:
    - validates shape `{ since: IsoTimeStamp; until: IsoTimeStamp }`
    - validates both since and until are valid IsoTimeStamps
  - verify: `npm run test:types`

- [ ] **create `src/domain.operations/checks/isIsoTimeStampRange.test.ts`**
  - depends: 4.1.create isIsoTimeStampRange.ts
  - accepts:
    - `{ since: '2024-01-15T14:30:00Z', until: '2024-01-15T16:30:00Z' }` → true
    - `{ since: '2024-01-15', until: '2024-01-22' }` → false (dates, not timestamps)
    - `{ start: '...', end: '...' }` → false (wrong keys)
    - `null` → false
  - verify: `npm run test:unit -- isIsoTimeStampRange.test.ts`

### 4.2 IsoDateStampRange validator

- [ ] **create `src/domain.operations/checks/isIsoDateStampRange.ts`**
  - depends: 2.2.create isIsoDateStamp.ts, 1.3.create IsoTimeStampRange.ts
  - accepts:
    - validates shape `{ since: IsoDateStamp; until: IsoDateStamp }`
    - validates both since and until are valid IsoDateStamps
  - verify: `npm run test:types`

- [ ] **create `src/domain.operations/checks/isIsoDateStampRange.test.ts`**
  - depends: 4.2.create isIsoDateStampRange.ts
  - accepts:
    - `{ since: '2024-01-15', until: '2024-01-22' }` → true
    - `{ since: '2024-01-15T14:30:00Z', until: '2024-01-15T16:30:00Z' }` → false (timestamps, not dates)
    - `{ from: '...', to: '...' }` → false (wrong keys)
  - verify: `npm run test:unit -- isIsoDateStampRange.test.ts`

### 4.3 milestone verification

- [ ] **verify milestone 4 complete**
  - depends: all 4.x tasks
  - accepts:
    - all range validators compile
    - all range validator tests pass
    - 2 validator files created
    - 2 test files created
  - verify: `npm run test:unit -- isIsoTimeStampRange && npm run test:unit -- isIsoDateStampRange`

---

## milestone 5: manipulate operations

### 5.1 addDuration operation

- [ ] **update `src/domain.operations/manipulate/addDuration.ts`**
  - depends: milestone 1 complete, milestone 2 complete
  - accepts:
    - overload: `addDuration(IsoTimeStamp, IsoDuration) => IsoTimeStamp`
    - overload: `addDuration(IsoDateStamp, IsoDuration) => IsoDateStamp`
    - overload: `addDuration(IsoMonthStamp, IsoDuration) => IsoMonthStamp`
    - handles month boundary crossings
    - handles leap year edge cases
    - clamps invalid dates (day 31 → last valid day)
  - verify: `npm run test:types`

- [ ] **update `src/domain.operations/manipulate/addDuration.test.ts`**
  - depends: 5.1.update addDuration.ts
  - accepts:
    - `addDuration('2024-01-15T14:30:00Z', { hours: 2 })` → `'2024-01-15T16:30:00Z'`
    - `addDuration('2024-01-31T12:00:00Z', { days: 1 })` → `'2024-02-01T12:00:00Z'`
    - `addDuration('2024-01-31', { months: 1 })` → `'2024-02-29'` (leap year clamp)
    - `addDuration('2024-02-29', { years: 1 })` → `'2025-02-28'` (leap year clamp)
    - `addDuration('2024-01-15', { days: 7 })` → `'2024-01-22'`
  - verify: `npm run test:unit -- addDuration.test.ts`

### 5.2 subDuration operation

- [ ] **update `src/domain.operations/manipulate/subDuration.ts`**
  - depends: milestone 1 complete, milestone 2 complete
  - accepts:
    - same overload pattern as addDuration
    - subtracts duration instead of adds
  - verify: `npm run test:types`

- [ ] **update `src/domain.operations/manipulate/subDuration.test.ts`**
  - depends: 5.2.update subDuration.ts
  - accepts:
    - `subDuration('2024-01-15T16:30:00Z', { hours: 2 })` → `'2024-01-15T14:30:00Z'`
    - `subDuration('2024-02-01', { days: 1 })` → `'2024-01-31'`
  - verify: `npm run test:unit -- subDuration.test.ts`

### 5.3 getDuration operation

- [ ] **update `src/domain.operations/manipulate/getDuration.ts`**
  - depends: milestone 1 complete, milestone 2 complete
  - accepts:
    - accepts `{ since: IsoTimeStamp, until: IsoTimeStamp }`
    - accepts `{ since: IsoDateStamp, until: IsoDateStamp }`
    - returns IsoDuration with all units
    - returns negative duration when since > until
  - verify: `npm run test:types`

- [ ] **update `src/domain.operations/manipulate/getDuration.test.ts`**
  - depends: 5.3.update getDuration.ts
  - accepts:
    - `getDuration({ since: '2024-01-15T14:30:00Z', until: '2024-01-15T16:30:00Z' })` → `{ hours: 2 }`
    - `getDuration({ since: '2024-01-15', until: '2024-01-22' })` → `{ days: 7 }`
    - `getDuration({ since: '2024-01-15T16:30:00Z', until: '2024-01-15T14:30:00Z' })` → negative hours
  - verify: `npm run test:unit -- getDuration.test.ts`

### 5.4 toMilliseconds operation

- [ ] **update `src/domain.operations/manipulate/toMilliseconds.ts`**
  - depends: 1.4.update IsoDuration.ts
  - accepts:
    - supports `years` field (approximate: 365.25 days)
    - supports `months` field (approximate: 30.44 days)
    - all existing fields preserved
  - verify: `npm run test:types`

- [ ] **update `src/domain.operations/manipulate/toMilliseconds.test.ts`**
  - depends: 5.4.update toMilliseconds.ts
  - accepts:
    - `toMilliseconds({ hours: 1 })` → `3600000`
    - `toMilliseconds({ days: 1 })` → `86400000`
    - `toMilliseconds({ years: 1 })` → approximately 31557600000
  - verify: `npm run test:unit -- toMilliseconds.test.ts`

### 5.5 milestone verification

- [ ] **verify milestone 5 complete**
  - depends: all 5.x tasks
  - accepts:
    - all manipulate operations compile
    - all manipulate operation tests pass
    - duration arithmetic handles boundaries correctly
    - leap year cases handled correctly
  - verify: `npm run test:unit -- manipulate`

---

## milestone 6: observe operations

### 6.1 now operation

- [ ] **create `src/domain.operations/observe/now.ts`**
  - depends: 2.1.create isIsoTimeStamp.ts
  - accepts:
    - `now()` returns current UTC timestamp
    - return type is IsoTimeStamp
    - format is `yyyy-MM-ddTHH:mm:ssZ`
  - verify: `npm run test:types`

- [ ] **create `src/domain.operations/observe/now.test.ts`**
  - depends: 6.1.create now.ts
  - accepts:
    - `now()` returns valid IsoTimeStamp
    - `isIsoTimeStamp(now())` → true
    - result ends with 'Z' (UTC)
  - verify: `npm run test:unit -- now.test.ts`

### 6.2 today operation

- [ ] **create `src/domain.operations/observe/today.ts`**
  - depends: 2.2.create isIsoDateStamp.ts
  - accepts:
    - `today()` returns current UTC date
    - return type is IsoDateStamp
    - format is `yyyy-MM-dd`
  - verify: `npm run test:types`

- [ ] **create `src/domain.operations/observe/today.test.ts`**
  - depends: 6.2.create today.ts
  - accepts:
    - `today()` returns valid IsoDateStamp
    - `isIsoDateStamp(today())` → true
    - result matches `yyyy-MM-dd` pattern
  - verify: `npm run test:unit -- today.test.ts`

### 6.3 update stopwatch

- [ ] **update `src/domain.operations/observe/stopwatch/startDurationStopwatch.ts`**
  - depends: 1.4.update IsoDuration.ts
  - accepts:
    - uses IsoDuration type for return
    - existing functionality preserved
  - verify: `npm run test:types`

### 6.4 milestone verification

- [ ] **verify milestone 6 complete**
  - depends: all 6.x tasks
  - accepts:
    - now() returns valid IsoTimeStamp
    - today() returns valid IsoDateStamp
    - stopwatch uses IsoDuration
  - verify: `npm run test:unit -- observe`

---

## milestone 7: casts and exports

### 7.1 update casts

- [ ] **update `src/domain.operations/casts/toMillisecondsSinceEpoch.ts`**
  - depends: milestone 1 complete
  - accepts:
    - accepts IsoTimeStamp | IsoDateStamp
    - returns number (milliseconds since epoch)
  - verify: `npm run test:types`

### 7.2 update index exports

- [ ] **update `src/index.ts`**
  - depends: all milestones 1-6 complete
  - accepts:
    - exports all domain.objects types
    - exports all domain.operations functions
    - exports now and today
    - no unused exports
  - verify: `npm run test:types`

### 7.3 update package.json

- [ ] **update `package.json`**
  - depends: 7.2.update index.ts
  - accepts:
    - name changed to `iso-time` (or kept as `@ehmpathy/uni-time` for backwards compat)
    - version bumped appropriately
    - description updated
    - keywords updated
  - verify: `npm run build`

### 7.4 milestone verification

- [ ] **verify milestone 7 complete**
  - depends: all 7.x tasks
  - accepts:
    - all exports accessible from package root
    - build succeeds
    - no unused exports warning
  - verify: `npm run build && npm run test:types`

---

## milestone 8: integration tests

### 8.1 cast integration tests

- [ ] **create `src/domain.operations/casts/castInputToDate.integration.test.ts`**
  - depends: milestone 7 complete
  - accepts:
    - tests Date input conversion
    - tests string input conversion
    - tests number input conversion
    - tests { mse: number } input conversion
    - tests { date: Date } input conversion
  - verify: `npm run test:integration -- castInputToDate`

### 8.2 addDuration integration tests

- [ ] **create `src/domain.operations/manipulate/addDuration.integration.test.ts`**
  - depends: milestone 5 complete
  - accepts:
    - tests date-fns integration
    - tests timezone handling
    - tests with real Date objects
  - verify: `npm run test:integration -- addDuration`

### 8.3 stopwatch integration tests

- [ ] **verify `src/domain.operations/observe/stopwatch/startDurationStopwatch.integration.test.ts`**
  - depends: milestone 6 complete
  - accepts:
    - tests hrtime integration
    - tests logging integration
    - tests threshold behavior
  - verify: `npm run test:integration -- startDurationStopwatch`

### 8.4 milestone verification

- [ ] **verify milestone 8 complete**
  - depends: all 8.x tasks
  - accepts:
    - all integration tests pass
    - no flaky tests
  - verify: `npm run test:integration`

---

## milestone 9: acceptance tests

### 9.1 create acceptance test suite

- [ ] **create `acceptance/iso-time.acceptance.test.ts`**
  - depends: milestones 1-8 complete
  - accepts:
    - covers usecase.1: type absolute instants with stamps
    - covers usecase.2: type detached patterns with floats
    - covers usecase.3: add duration to stamps
    - covers usecase.4: compute duration between stamps
    - covers usecase.5: represent time ranges
    - covers usecase.6: validate stamp formats at runtime
    - covers usecase.7: validate float formats at runtime
    - covers usecase.8: get current time as stamps
    - covers boundary.1: stamp format strictness
    - covers boundary.2: float format strictness
    - covers boundary.3: duration edge cases
    - covers boundary.4: leap year handling
  - verify: `npm run test:acceptance:locally`

### 9.2 milestone verification

- [ ] **verify milestone 9 complete**
  - depends: 9.1.create acceptance test suite
  - accepts:
    - all 8 use cases pass
    - all 4 boundary cases pass
    - acceptance tests run against built package
  - verify: `npm run test:acceptance:locally`

---

## milestone 10: cleanup and finalization

### 10.1 remove old uni-time references

- [ ] **cleanup old type references**
  - depends: milestone 9 complete
  - accepts:
    - old UniDateTime → IsoTimeStamp migration complete
    - old UniDate → IsoDateStamp migration complete
    - old UniMonth → IsoMonthStamp migration complete
    - old UniTime → IsoTimeFloat migration complete
    - old UniDateRange → IsoDateStampRange migration complete
    - old UniDateTimeRange → IsoTimeStampRange migration complete
    - old UniDuration → IsoDuration migration complete
  - verify: `npm run test`

### 10.2 add deprecated exports (optional)

- [ ] **add backwards compatibility exports**
  - depends: 10.1.cleanup old type references
  - accepts:
    - (optional) deprecated re-exports for old names
    - deprecation warnings in comments
  - verify: `npm run test:types`

### 10.3 run full test suite

- [ ] **verify full test suite passes**
  - depends: 10.1, 10.2
  - accepts:
    - `npm run test:types` passes
    - `npm run test:format` passes
    - `npm run test:lint` passes
    - `npm run test:unit` passes
    - `npm run test:integration` passes
    - `npm run test:acceptance:locally` passes
  - verify: `npm run test`

### 10.4 verify build

- [ ] **verify production build**
  - depends: 10.3.run full test suite
  - accepts:
    - build succeeds without errors
    - dist/ contains all expected files
    - types are correctly generated
  - verify: `npm run build && ls dist/`

### 10.5 milestone verification

- [ ] **verify milestone 10 complete**
  - depends: all 10.x tasks
  - accepts:
    - full test suite passes
    - build succeeds
    - ready for release
  - verify: `npm run test && npm run build`

---

## final verification

- [ ] **all milestones complete**
  - depends: milestones 1-10 complete
  - accepts:
    - all 8 blackbox use cases satisfied
    - all 4 boundary cases satisfied
    - 100% unit test coverage for domain operations
    - type composition verified at compile time
    - build passes with no errors
    - lint/format passes with no violations
  - verify: `npm run test && npm run build`

---

## summary

| milestone | tasks | focus |
|-----------|-------|-------|
| 1 | 8 | domain objects (types) |
| 2 | 9 | stamp validators |
| 3 | 13 | float validators |
| 4 | 5 | range validators |
| 5 | 9 | manipulate operations |
| 6 | 7 | observe operations |
| 7 | 5 | casts and exports |
| 8 | 5 | integration tests |
| 9 | 2 | acceptance tests |
| 10 | 6 | cleanup and finalization |
| **total** | **69** | — |

---

## execution notes

1. **each milestone is a logical boundary** — complete before proceeding
2. **run verification after each task** — catch issues early
3. **milestones can overlap** — 1.x and 2.x can be developed in parallel
4. **integration tests require build** — ensure build works before running
5. **acceptance tests are the final proof** — don't skip them
